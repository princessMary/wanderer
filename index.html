<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Course search with WordWanderer</title>

<!-- <meta property="og:title" content="WordWanderer â€“ take your text for a walk" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="We are experimenting with visual ways in which we can enhance people's engagement with language. By fusing the information we can obtain from corpus searches, concordance outputs and word clouds we are aiming to enable and encourage people to notice and wander through the words they read, write and speak." />
<meta property="og:description" content="We are experimenting with visual ways in which we can enhance people's engagement with language. By fusing the information we can obtain from corpus searches, concordance outputs and word clouds we are aiming to enable and encourage people to notice and wander through the words they read, write and speak." />
<link rel="canonical" href="http://wordwanderer.org" />
<meta property="og:url" content="http://wordwanderer.org" />
<meta property="og:site_name" content="WordWanderer" />
<meta property="og:image" content="http://wordwanderer.org//img/visgif2.gif" />
<meta property="og:type" content="website" /> -->

<link rel="icon" type="image/png" href="favicon.png?v=2">
<script src="js/jquery-1.10.2.min.js"></script>
<script src="js/jspos-0.2.2/lexer.js"></script>
<script src="js/jspos-0.2.2/lexicon.js"></script>
<script src="js/jspos-0.2.2/POSTagger.js"></script>
<script src="js/prefixfree.min.js"></script>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="data.js"></script>

<style type="text/css" media="screen">

body {
	font-family: "HelveticaNeueLight", "HelveticaNeue-Light", "Helvetica Neue Light", "HelveticaNeue", "Helvetica Neue",  "Helvetica", "Arial", sans-serif;
	font-weight: 200;
	margin: 0;
	font-size: 16px;
	width: 1000px;
	height: 750px;
	margin: auto;
	background-color: #eee;
	overflow-y: scroll;
}

#intro p img {
	margin: -10px 10px 10px 175px;
	float: left;
	border-radius: 5px;
}

* {
	xborder: 1px solid #999;
}

a, a:link, a:visited, a:active {
	color: #000;
}

h1, h2 {
	font-weight: 200;
}


/* INTRO */

#intro {
	border: 1px solid transparent;
	text-align: center;
	position: absolute;
	width: 1000px;
	height: 750px;
	/* background: #eee url("img/bg.svg") no-repeat top center; */
	background-size: 1000px 750px;
	z-index: 30;
	transition: opacity .5s ease-in-out;
}

#intro h1, #intro h2 {
	width: 650px;
	margin: auto;
	padding: 0;
	text-align: right;
}

#intro h1 {
	font-size: 40px;
	line-height: 45px;
	margin-top: 25px;
}

#intro h2 {
	font-size: 22px;
	line-height: 30px;
	font-style: italic;
	margin-bottom: 50px;
}

#intro p {
	margin-top: 30px;
}

p#wanderp {
	margin: 30px 0;
	padding-top: 0;
}

p#wanderp label {font-size: 14px;	}

#wander {
	margin-left: 20px;
	font-size: 16px;
	xfont-weight: bold;
}

#wander.disabled {
}

@keyframes rotate {
	from {transform: rotate(0deg);}
	to {transform: rotate(360deg);}
}

#loading {
	width: 20px;
	height: 20px;
	background: transparent url("img/loading.svg") no-repeat center;
	background-size: 15px 15px;
	display: inline-block;
	opacity: 0;
  animation-duration: 1s;
  animation-name: rotate;
	animation-timing-function: linear;
  animation-iteration-count: infinite;
}

#loading.active {
	opacity: 1;
}

#intro #tooshort {
	visibility: hidden;
	margin: 5px 0;
	padding: 0;
	font-size: 14px;
	margin-left: 325px;
}

#intro p.teaser {
	clear: both;
	margin: auto;
	padding-top: 0px;
	width: 475px;
	padding-right: 175px;
	text-align: left;;
	height: 190px;
}

#intro #tooshort.active {
	visibility: visible;
}

#intro #tooshort.active span {
	padding: 3px 6px;
	border-radius: 6px;
}

#intro p.tolowercase {
	margin-top: 10px;
	font-size: 14px;
}

#intro p.tolowercase label {
	padding-left: 3px;
}

#textwrap {
	width: 1000px;
	margin-top: 25px;
}

#selecttext {
	width: 200px;
	float: left;
	margin: auto;
	padding-top: 40px;
	margin-left: 225px;
	text-align: left;
	line-height: 20px;
}

#intro p#selecttext {
	margin-top: 0;
}

#intro textarea {
	font-size: 14px;
	resize: none;
	width: 300px;
	height: 100px;
	border: 1px solid #000;
	margin: 0;
	padding: 2;
	margin-top: 0px;
	margin-right: 150px
}


#intro #sharebuttons {
	margin-top: 60px;
}

#sharebuttons2 {
	margin-top: 20px;
}

#sharebuttons .fb-like, #sharebutton twitter-share-button {
	width: 95px;
	text-align: center;
}

#sharebuttons .fb-like {
	display: inline !important;
	float: left;
}

#sharebuttons iframe.twitter-share-button {
	padding-left: 410px;
	float: left;
}

#intro #contact {
	margin-top: 0px;
	font-size: 12px;
}

/* MAIN */

#header {
	margin: auto;
	padding: 0;
	top: 5px;
	position: absolute;
	width: 1000px;
	height: 50px;
	font-size: 36px;
	z-index: 20;
}

#header h1 {
	font-size: 24px;
	line-height: 45px;
	margin-top: 2px;
	margin-left: 5px;
	float: left;
	user-select: none;

}

#header h1:hover {
	cursor: pointer;
}

#header h2 {
	user-select: none;
	float: right;
	font-size: 16px;
	line-height: 45px;
	margin-top: 2px;
	margin-right: 0px;
	text-align: right;
	font-weight: normal;
}

#header h2 span {
	background-color: #fff;
	color: #000;
	margin: 0px;
	font-size: 16px;
	border-radius: 5px;
	padding: 2px 4px;
}

#header h2 span:hover {
	background-color: #ddd;
	xcolor: #fff;
	cursor: pointer;
}

#header h2 span.active {
	background-color: #000;
	color: #fff;
	cursor: pointer;
}

#search {
	margin: 0px;
	font-size: 16px;
	display: block;
	position: absolute;
	margin: auto;
	margin-top: 15px;
	clear: both;
	xpadding: 0 2px;
	width: 200px;
	left: 400px;
	z-index: 21;
}

#suggestions {
	overflow: hidden;
	white-space: nowrap;
	border: 1px solid #000;
	width: 200px;
	left: 400px;
	color: #000;
	background-color: #fff;
	margin: 0px;
	font-size: 16px;
	line-height: 20px;
	display: block;
	position: absolute;
	margin: auto;
	margin-top: 40px;
	padding: 0px;
	z-index: 20;
	opacity: 0;
	box-shadow: 3px 3px 6px rgba(0,0,0,.25);

}

#suggestions div {
	padding: 2px 8px;
}

#suggestions:hover div:hover {
	cursor: pointer;
	xtext-decoration: underline;
	background-color: #ddd !important;
}

#suggestions:hover div {
	background-color: #fff !important;
}

#suggestions div.active {
	background-color: #ddd;
}

#options, #help {
	display: none;
	margin: auto;
	border: 1px solid #000;
	position: absolute;
	padding: 10px;
	margin-top: 45px;
	width: 400px;
	margin-left: 580px;
	background-color: #fff;
	box-shadow: 3px 3px 6px rgba(0,0,0,.25);
	z-index: 25;
}


#help p {
	margin-top: 0px;
	margin-bottom: 12px;
}

#help {
	width: 525px;
	margin-left: 445px;
	padding: 15px;
	padding-bottom: 0;
}

#help img {
	clear: left;
	float: left;
	padding: 5px 15px 10px 0;
}

#options ul {
	padding: 0;
	margin: 0;
	margin-bottom: 20px;
	margin-left: 15px;
	float: left;
}

#exclude {
	width: 250px;
}

#options p.exclude {
	margin-bottom: 5px;
}

#options p {
	margin: 0;
	margin-bottom: 20px;
	padding-left: 4px;
	clear: both;
}

#options p.types { margin-bottom: 5px;}
#options p.buttons { margin-bottom: 5px;}

#options ul li {
	list-style-type: none;
	padding-bottom: 3px;
}

#options ul li label { padding-left: 4px; }

#selectall:hover {
	cursor: pointer;
	text-decoration: underline;
}

#options.active, #help.active {
	display: block;
}

#apply {
	xfont-weight: bold;
	font-size: 16px;

}

label {
	user-select: none;
	cursor: pointer;
}

input[type="checkbox"], input[type="submit"] {
	cursor: pointer;
}

#options p input {
	margin: 0;
	margin-right: 10px;
}


#vis, #vis2	{
	margin: auto;
	top: 60px;
	position: absolute;;
	width: 1000px;
	height: 500px;
	border: 1px solid transparent;
	font-size: 36px;
	z-index: 1;
}

#can {
	position: absolute;
	top: 60px;
	margin: auto;
	border: 0px solid transparent;
	background-color: #fff;
	border-radius: 10px;
	z-index: 0;
}

#vis2 {
	border: 1px solid #999;
	text-align: center;
	margin: 0;
	position: absolute;
	top: -1000px;
	overflow: hidden;
	left: 0;
	background-color: transparent;
	opacity: 0;
	user-select: none;
}

#vis {
/*	background-color: #fff;*/
}

#vis span, #vis2 span {
	user-select: none !important;
	padding: 0px;
	white-space: nowrap;
	border-radius: .35em;
	border: .1em solid transparent;
}

#vis span {
	cursor: pointer !important;
	z-index: 1;
	color: rgba(0,0,0,.5);
	position: absolute;
	display: block;
	left: 0px;
	top: 0px;
	transition: transform 1s ease-in-out, opacity ease-in-out 1s, color linear .2s, background linear .2s;
	transform-origin: 0% 50%;
	tap-highlight-color: transparent;

	background: white none no-repeat right center;
	background-size: 1em 1em;
}

#vis span.justadded {
	opacity: 0;
	transition: left 0, top 0, font-size 0, opacity 1s;
	transition-delay: 1s;
}

#vis span.toberemoved {
	opacity: 0;
	transition: opacity .5s;
	transition-delay: 0s;
}

#vis span.notlinked {
	color: rgba(0,0,0,.15);
	xtransition-duration: .25s;
	transition-delay: 0s;
}

#vis span.linked {
	color: rgba(0,0,0,1);
	xtransition-duration: .25s;
	transition-delay: 0s;
}

#vis span:hover, #vis span.hover {
	display: block;
	color: black;
	visibility: visible;
	background-color: white !important;
	border: .1em solid black;
	z-index: 10;
	xpadding-left: 20px;
	xpadding-right: .75em;
	xbackground: white url("img/arrow2.svg") no-repeat right center;
	xbackground-size: .75em .75em;
}

#vis span.compare:hover, #vis span.compare.hover {
	xbackground: white url("img/arrow2.svg") no-repeat right center;
	xbackground-size: .75em .75em;
}

#vis span.active, #vis span.active:hover {
	z-index: 10;
	background-color: black !important;
	color: white !important;
	xtransform-origin: 50% 50%;
}

#instances {
	display: none;
	position: absolute;
	padding-bottom: 25px;
	top: 575px;
	width: 1000px;
	overflow: hidden;
	margin: auto;
	text-align: center;
	font-size: 14px;
	transition: opacity .5s ease-in-out;
	user-select: none;
}

#instances.active {
	display: block;
}

#instances span {
	padding: 2px;
	color: #999;
	cursor: default;
	border: 1px solid transparent;
	border-radius: .35em;
}

#instances span.hover {
	xtext-decoration: underline;
	background-color: #fff;
	color: #000;
	cursor: pointer;
	border: 1px solid #000;
}

#instances div  {
	white-space: nowrap;
	line-height: 25px;
}

#instances div.left {
	clear: both;
	float: left;
	text-align: right;
}

#instances div.middle {
	float: left;
	text-align: center;
	xfont-weight: bold;
}

#instances div.middle span {
	color: #000;

}

#instances div.right {
	float: right;
	text-align: left;
}

#instances div.left {   xbackground-color: #FFD2B1;}
#instances div.middle { xbackground-color: #DDE8C7;}
#instances div.right {  xbackground-color: #BFD7EA;}

#instances span.ellipsis {
	color: #777;
}

#instances span.active {
	color: #fff;
	background-color: #000;
}

#instances div#showall {
	padding-top: 15px;
	width: 1000px;
	height: 50px;
	clear: both;
	text-align: center;
}

#instances div#showall span {
	border-radius: 5px;
	color: #000;
	background-color: #fff;
}

#instances div#showall span:hover {
	background-color: #ddd;
	cursor: pointer;
}


/* HELP */

</style>

</head>
<body>

<div id="intro">

	<!-- <p><img src="img/visgif2.gif" width=250 height=123 alt="VisGIF"></p> -->
	<br>
		<br>
			<br>
	<h1>WordWanderer</h1>

	<h2>Course search</h2>

	<!-- <p class="teaser">
		We are experimenting with visual ways in which we can enhance people's engagement with language. By fusing the information we can obtain from corpus searches, concordance outputs and word clouds we are aiming to enable and encourage people to notice and wander through the words they read, write and speak.<br><br>

	To try an early prototype of the WordWanderer <br>
	just select a text below or paste your own and take it for a walk.</p> -->

	<div id="textwrap">
		<p id="selecttext" hidden>
		  <select name="selecttext">
			<option selected value="own">Choose to wander :) </option>
		  <!-- <optgroup label="Or choose an example text:">
			<option value="hanselgretel">Hansel and Gretel (Brothers Grimm)</option>
			<option value="vonnegut">2 B R 0 2 B (Vonnegut)</option>
			<option value="borges">The Library of Babel (Borges)</option>
			<option value="stevenson">Jekyll &amp; Hyde (Stevenson)</option> -->
			 </optgroup>
		  </select>
		</p>

		<!-- <textarea id="text" placeholder="Leave this empty"></textarea> -->

	</div>


	<p id="tooshort"><span></span></p>


	<p id="wanderp">
		<!-- <input checked type="checkbox" id="lowercase" /> <label for="lowercase">turn text to lower case</label><br> -->
		<input type="submit" class="disabled" name="wander" value="Start searching" id="wander">
	<span id="loading">&nbsp;</span></p>

	<!-- <p id="contact">
		By <a href="http://mariandoerk.de/">Marian DÃ¶rk</a> and <a href="https://www.cardiff.ac.uk/people/view/142032-knight-dawn">Dawn Knight</a> carried out when at <a href="https://www.ncl.ac.uk">Newcastle University</a><br>
		funded by the RCUK Digital Economy programmeâ€™s <a href="http://www.patina.ac.uk/">PATINA project</a>.<br>
		More details about the concept and methods are in this <a href="http://mariandoerk.de/wordwanderer/corpora2015.pdf">article</a>.<br>
		The code of the WordWanderer prototype is on <a href="https://github.com/nrchtct/WordWanderer">GitHub</a>.
	</p> -->

</div>


<div id="header">
	<h1>Home</h1>
	<!-- <h2>
		<span id="options_button">Options</span> &nbsp;
		<span id="help_button">Help</span> &nbsp;
	</h2> -->
	<input type="search" id="search" name="search" placeholder="search for words">

	<div id="suggestions">	</div>

</div>

<div id="vis"></div>
<div id="vis2"></div>
<canvas id="can" width="1000" height="500"></canvas>





<div class="" id="options">

	<p class='types'><strong>Show</strong> (<span id="selectall">select all</span>)</p>

	<ul>
		<li> <input checked type="checkbox" id="type_JJ" /><label for="type_JJ">Adjectives</label></li>
		<li> <input checked type="checkbox" id="type_RR" /><label for="type_RR">Adverbs</label></li>
		<li> <input checked type="checkbox" id="type_NN" /><label for="type_NN">Nouns</label></li>
		<li> <input checked type="checkbox" id="type_VV" /><label for="type_VV">Verbs</label></li>
	</ul>
	<ul>
		<li> <input checked type="checkbox" id="type_CC" /><label for="type_CC">Conjunctions</label></li>
		<li> <input checked type="checkbox" id="type_DD" /><label for="type_DD">Determiners</label></li>
		<li> <input checked type="checkbox" id="type_II" /><label for="type_II">Prepositions</label></li>
		<li> <input checked type="checkbox" id="type_PP" /><label for="type_PP">Pronouns</label></li>
	</ul>
	<ul>
		<li> <input type="checkbox" id="type_PU" /><label for="type_PU">Punctuation</label></li>
		<li> <input type="checkbox" id="type_MC" /><label for="type_MC">Numbers</label></li>
		<li> <input type="checkbox" id="type_SY" /><label for="type_SY">Symbols</label></li>
		<li> <input type="checkbox" id="type_FU" /><label for="type_FU">Other</label></li>
	</ul>


	<p class='exclude'><strong>Hide</strong> </p>

	<ul>
		<li> <input checked type="checkbox" id="stopwords" /><label for="stopwords">Common words such as: the, is, at, in, and of</label> </li>
		<li> <input type="checkbox" id="excludeopt" /> <input id="exclude" placeholder="enter words separated by space" name="exclude">
	</ul>

	<p class='buttons'>
		<input type="submit" name="apply" value="Apply" id="apply">
	</p>
</div>

<div id="instances">
</div>




<div id="post">

</div>

<script>

var beyondhome = false;

var sourcetext = "";

// config
var windowside = 10;
var limit = 300; // for cloud
var limit_context = 100; // for context
var limit_compare = 100; // per word
var snippetlimit = 10;
var lowercase = true;

var baseurl = document.URL.split("#")[0];

var Words = {};
var words = [];
var indices = {};
var selection = [];
var suggestions = [];
var suggestionindex = 0;

var hoverTimeout = null;

var worddist = 5;

var wordmap = {};

var maxcount = 0;

var active = [];

var min_text_length = 50;
$("#tooshort").html("<span>Please paste at least "+min_text_length+" words.</span>");

var canel = document.getElementById("can");
var can = canel.getContext("2d");


// make sure text is long enough
function check_text() {

	var text = $("#text").val();
	var textA = text.split(" ");;

	var textchoice = $('#selecttext select').prop("value");

	if (textA.length < min_text_length && textchoice=="own") {
		$("#tooshort").addClass("active");
		$("#wander").addClass("disabled");
	}
	else {
		$("#tooshort").removeClass("active");
		$("#wander").removeClass('disabled');
	}
}


$("#text").unbind().change(check_text);

$("#wander").unbind().mouseover(check_text)

$("#wander").click(function(){

	//var text = $("#text").val();

	var text = "energy solutions energy numerical modeling multiphase flows bioenergy biofuels entrepreneurship breakers digital paradigm product product sustainability designing electronic device business design business art freehand drawing watercolour comics expression drawing comic art leading management management organization organization swedish business communication negotiation presentation leadership communications spanish spanish spanish business spanish language swedish swedish finnish finnish finnish finnish finnish finnish finnish service design service design history architecture history architecture history architecture software software software design structures building building physics architects space space synthesis force material material organisational architecture finland scandinavia architecture finland scandinavia architecture finland scandinavia history history architecture history finnish architecture history finnish architecture architectural graphics architecture architecture building design interfaces building design contemporary finnish architecture building design software sustainable design housing environment housing politics for housing private city community urban city mobility communication city living environment architectural history architecture postmodern history architecture building conservation renovation traditional structures building conservation building history history wood architecture finland history architecture history architecture nordic modernism architecture architectural architectural architectural architecture architecture architecture art built environment user oriented space design building design building design building design building design building design cultures cultures living+ design structures parametric design design structures algorithmic design design structures digital fabrication parametric design algorithmic design design structures design structures design structures tectonics design structures design structures design structures building site monitoring architect principal designer drawings building specifications materials architecture reuse buildings building building construction documents wood architecture construction wood construction wood construction intensive wood construction wood program materials tectonics aesthetics industrial wood construction sustainability building wood program building wood building housing urban context living housing design practise housing design housing design bright living natural lighting housing design 1860's day methodology cities urban design urban design urban design themes urban renewal wooden sustainable urban design urban design architecture urban renewal design urban renewal pre-thesis digital urbanism digital urbanism architecture history architecture history architecture architecture building design building design building wood construction housing design urban stables urban design idea information communication information literacy comic strip drawing painting drawing drawing comics artists drawing space drawing narrative landscape comics expression storytelling comic art colour colour sculpture mold casting digital sculpture programming sculptors kinetic robotic sculpture constructing sculpture wood metal digital sculpture sculpture metal casting sonic sculpture silkscreen printing intaglio intaglio japanese watercolour woodcut woodcut art history philosophy history comics narrative contemporary finnish art history narrative contemporary finnish design history art history materials meanings debates dressing fashion clothing european history photography image digital art programming visual artists digital painting vector illustration online scenarios painting colour light space metal casting sculpture philosophy argumentation environmental aesthetics art global re-mapping history art analyzing digital data living contemporary drawing art contemporary art space installation art sculpture media intervention city digital scientific presenting nida art design gathering qualitative data analysing qualitative data philosophy aesthetics philosophy art painting materials digital image photography digital image therapeutic aspects art education visualized creative visual management corporate ethics organizational behavior human resource management work management management consulting work cultures management accounting financial accounting marketing management integrated marketing communications marketing services consumer behavior markkinointitutkimus voiman johtaminen arviointi entrepreneurship innovation management global marketing management management multinational organizations management international business finance business analytics statistics business mathematics economics business law tax law corporate law business taxation operations management business communication management communication communication management digital communication media business presentations management organisations corporate accounting  financial management entrepreneurship marketing sales economics business environment managing business dynamic business simulation game career wellbeing student-athlete sports career safe industrial environment flows reactors fluid flow heat transfer chemical structure bonding chemical reaction organic chemistry bioit chemistry bioscience material work-based work design meets biomaterials environmental operations industrial physical chemistry bioit programming chemical industrial material industrial bio chemical chemical reaction automation design operations chemical thermodynamics chemistry elements synthesis characterization inorganic materials elements organic synthesis surface chemistry inorganic chemistry cell molecular biology bioprocess biochemistry industrial biomass materials atomic bonding microstructures materials microstructures properties materials polymer microstructure metals ceramics properties materials metallurgical operation work community international environmental chemistry protection environmental management industry chemical instrumental chemical dynamics mathematical statistical industry plant biomass nanomaterials community execution biorefinery investment wood properties wood products international safety exchange chemical lignocellulose chemistry thermochemical catalysis catalysis biomass refining biomass pretreatment fractionation biomass pretreatment fractionation integration products polymer synthesis wood wood products polymer wood products fibres fibre products web-based natural fiber products polymer properties converting web-based products cellulose-based fibres polymer reaction interfacial biobased biopolymers product computer visualization scientific presentation wood specialization work interfacial renewable materials polymer blends composites product biolab microbiology biolab bioprocess biophysical chemistry biolab biology concepts biochemistry bioprocess optimization simulation cell- tissue chemistry nanochemistry nanoengineering quantum mechanics spectroscopy computational chemistry quantitative instrumental chemistry elements analytical chemistry reactivity organic chemistry chemistry chemical instrumentation electroanalytical electrochemistry electrochemical kinetics selectivity organic synthesis crystallography structural characterization molecular thermodynamics functional inorganic materials computational chemistry transport electrodes membranes electrochemical energy conversion chemistry chemistry asymmetric synthesis natural products organometallic chemistry synthesis materials powder metallurgy composites metallic materials microfabrication interfaces nanomaterials film functional materials biomimetic materials technologies materials characterization materials renewable energy functional materials functional materials functional materials materials nuclear power plants electron microscopy chemical thermodynamics thermodynamics solutions thermodynamics modeling simulation metal recycling technologies minerals recycling operations mineral recycling minerals work pyrometallurgy pyrometallurgy hydrometallurgy electrochemistry corrosion hydrometallurgy metallurgical work circular economy design technical innovation circular economy materials thermodynamics separation thermodynamics separation chemical chemical modeling reactor design automation reaction fluid flow units design chemical safety sustainability design chemical plantprocess design business management automation context automation information organic structural enzymatic biomimetic catalysis biosystems biomaterials cell factory cell biology synthetic biology medicinal chemistry microfluidics biomems toolkit ultrathin films operations paper board finishing converting molecular industrial chemistry electrochemistry organic chemistry biofuels biorefineries microfabrication film sustainable metals functional materials teaching partner societal models sustainable energy services building materials mechanics beam frame structures structural design construction management heat mass transfer buildings computation simulation building information construction concrete building materials maintenance repair structures operations management construction concrete structures strategic management construction building physics design design energy efficient buildings indoor air quality indoor environment fire dynamics simulation fire risk evacuation finite element civil design bridges design reinforced concrete structures prestressed precast concrete structures steel structures composite steel structures material civil mechanics plate shell structures stability structures timber timber structures building geometry lightweight structures architecture structures architecture parametric structures architecture informed structures structures architecture design build programming programming programming programming computing data structures algorithms data structures algorithms databases artificial intelligence web human programming programming software software theoretical computer computer graphics human-computer interaction information security software data web software software design algorithmic machine declarative programming computer computer computer computer computer machine data mobile cloud computing concurrent programming scalable cloud computing services internet networking security emergent user interfaces network security mobile security cryptography data security information security design www services semantic web explorative information visualization www algorithms distributed algorithms computer-aided synthesis computational complexity combinatorics computer combinatorics programming parallel computers competitive programming algorithmic data mining database analytics data big data platforms artificial intelligence machine probabilistic kernel machine information visualization computer vision machine data machine bioinformatics deep user-centered product service design software software service software requirements software architectures software testing quality assurance software business software service software service software service software service digital business venturing digital business management global business digital age design usability evaluation user interface construction digital service design enterprise architecture service business innovation enterprise information governance industrial internet law digital society enterprise information law innovation growth internationalization embedded acoustical measurements computer graphics virtual acoustics aesthetics social media hands-on network bayesian data work bayesian complex networks mathematical network nonlinear dynamics chaos complex complex computational stochastics computational computational computational computational genomics bioinformatics modeling biological networks statistical genetics personalised medicine photography media graphic design digital media graphic design language image serial image characters illusions zines magazines code image typography layout motion language art situating work media media art design pack-age discourse design visual communication design design data introduction to information design information design studio intermediate level information design advanced level programming for information designers software studies for information designers dynamic visualization visual narrative in design exploring narratives studio design motion graphics and design helsinki photography photobook design image media aesthetics clinics platforms photography photography photography artistic work photography history contemporary photography artist photography photography hops computer photography representation interactive art animation internet technologies space media art culture user interface design dynamic visualization rendering3d technologies animation software media dynamic visualization storytelling storytelling clinic generative interactive narratives media physical interaction design tangible auditory interfaces motion capture animation multitouch interaction software programming artists audio work sound design music sound music interaction audio western classical music sound design interactive commodities sound instruments sound sound clinic composing data flow programming music sonic narration audiovisual productions game audio games game design game playability evaluation game game game design games games software game game design game design game game jam procedural audio prototyping service design visualization cultural analytics pre-vis work generative media coding game history data pixels design challenges interaction design interaction design interactive cinema non-linear narrative electronics artists gender sound cinema installation podcast contemporary web social media alive media embodied interaction dynamic visualization game digital fabrication intelligent computational media graphic design media photography media culture visual communication design media media power plants heat transfer thermodynamics energy energy computational fluid dynamics combustion combustion mass transfer energy environment emission industrial energy power simulation industrial drying evaporation district heating energy energy markets integration energy optimization comfortable healthy indoor environments heating ventilation air conditioning hvac design sustainable building energy hvac design building energy optimisation energy hvac hvac theoretical hvac degree programme electrical preparatory physics mechanics electrical workplace electricity magnetism electrical history electrical innovations astronomical world mathematical softwares computer digital signal programming programming oriented programming c++ algorithms data structures digital signals linux internet electrical energy measuring biological final digital design automation automation automation robotics materials properties quantum electronics electronics circuit circuit electrical electronics electronics stochastic communications statistical signal inference digital signal engineers estimation detection digital signal electrical energy information communication networks information transmission communication computer networks programming software defined radio digital design networking industrial automation automation automation automation software molecular cell biology photonics optical communications electronic circuits design electronics design protocamp radio space environmental humans materials measuring biological biomedical elec producing scientific publication design electronic circuits semiconductor physics optoelectronics semiconductor devices nanotechnology photonics optical fibers physics biomolecules micronova grand micro nanotechnology micronova design digital microelectronics integrated analog digital microelectronics integrated design electronic circuit design electromagnetic space space instrumentation microwave earth observation instrumentation satellite electromagnetic circuit simulations microwave microwave microwave antennas earth observation space physics radio astronomy space climate computational electromagnetics circuit antennas radiowave scattering propagation terahertz metamaterials nanophotonics radio space space radio work signal signal communications convex optimization engineers convex optimization convex optimization large data statistical signal signal signal convex optimization speech speech recognition speech language statistical natural language communication acoustics acoustics physics sound audio signal acoustics audio noise electroacoustics acoustics audio sensors virtual instrumentation optics work work optical trends communications wireless internet traffic measurements communication radio resource spectrum management mobile communication coding communications machine mobile pervasive routing sdn internet protocols internet technologies communication transmission network service provisioning simulation cybersecurity patterns communications ecosystems operator business value network design internet services computational user interface design human-computer interaction user interfaces quality experience user communications embedded real-time work digital optimal distributed intelligent automation estimation dynamic stochastic models estimation non-linear filtering parameter estimation automation software synthesis autonomous mobile robots information industry manufacturing automation micro- nano robotics model-based robotic vision networked intelligent buildings reinforcement robotic manipulation automation technologies condition monitoring electrical electric drives power converters converter design electrical machines electric drives electricity distribution markets electromechanics embedded high voltage materials energy numerical electromechanics power electronics power electromechanics electrical power energy electromechanics switched-mode power supplies electric energy power transmission electric energy smart grid distributed generation technologies lighting lighting technologies electrical installations buildings illumination building electrical design materials compatibility design reliability materials microsystems integration sustainable electronics biomaterials bioadaptive biosensing tissue-foreign body interaction design electronic design electronic prototype instrumentation electronics biomedical instrumentation mri instrumentation mri health technologies sensor fusion electromagnetic safety medical translational mathematical computing physics optical fibers magnetism networked partnering product innovation neppi networked partnering product innovation neppi tech electronics nanoengineering micro nanosciences micro nanosciences electronic circuit design electronic circuit design electronic circuit design micronova module communications automation automation illumination electronics electronics design portability electronics radar electronics measurements electronics cinematic expression cinematic expression cinematic expression cinematic expression film film film history film history film history film history film history specialisation film history practicum film history replacement film history film international international tampere film festival festivals film external productions documentary film preproduction documentary film shoot documentary film directing documentary film postproduction cinematography sound recording sound design observational interactive documentary film film documentary video documentary film documentary films portrait autobiographical documentary film history documentary film director atelier filmmaker's radio documentary documentary cinematography directing screenwriting screenwriting story concrete image scene dialogue screenwriting screenwriting film screenwriting feature film screenwriting feature film screenwriting feature film idea script festivals seminars dramaturge postproduction scene dialogue marketing entrepreneurship screenwriting editing scheduling directing leadership dynamics postproduction financing  film cinematography film legal budgeting contemporary producing fiction editing fiction editing fiction editing fiction editing profession editor fiction fiction editing finnish animation actor expression editing history memory profession editor documentary observational style documentary film avid avid film editing analyses film editing film editing commercial editing trailers trailer editing live music music video history film editing cinematic expression associative visual narration animation expression film characters live idea manuscript storyboarding animatics proposals animation animation filming lighting digital image adobe premierephotoshopafter effects animation circle richard williams pro dialogue editing film editors image sound opening credits fiction editing documentary film editing analysis  film editing content  animatics animation preproduction animation staging props animation editing animation sound design characteristics animation sound design directing directing directing directing scene directing directing directing casting directing story board preproduction directing directing 6mise-en-scÃ¨ne directing actor camera directing directing narrative strategies cinematic expression aristotelian narrative film narrative strategies cinematic expression drama film adaptation narrative strategies cinematic expression subject specific camera workflow cinematography international cinematographer practical cinematography commercial film cinematography character lighting work color grading into images camerimage cinematography scouting cinematography cinematographers digital cinematography music recording directing actors re-recording foley recording music effects seminars sound storytelling device film recording film sound recording pro sound editing dialogue editing sound effects editing mixing film music health safety construction design modeling modeling visual expression scenic material technical drawing history scenography digital expression areas scenography surface texture light theatre work history representational art dramaturgy composition dramaturgy dramaturgy artistic pre-planning choreography devising screening theatre arts design film television design design design design digital sets vfx worldbuilding space space plasticity light space space esitystilat tekniikka soft materials costume design presentation costume design arts costume design history dress peer student patternmaking design makeup hairstyling ba-production costume design areas costume design international clinic film external productions art and artistic art and artistic dynamics leadership contracts copyrights wellbeing work entrepreneurship seventh art artistic technical breakdown script 1 artistic technical breakdown script 2 film history film history film history film excercise documentary film ethics aesthetics documentary film editing documentary films directing director atelie genre documentary film history documentary film trends documentary film documentary cinematography documentary film financing festival pitching commissioned film feedback idea treatment 1st version film pre-production screenwriting screenwriting theoretical oriented television drama creative literary activities expertise services festivals seminars film financing distribution international co-productions business contemporary producing leadership management pitching negotiation legal film preproduction mentoring film film editing digital postproduction image sound editing feature film television editing feature film television editing feature film television editing feature film television movement perspective editing history memory film editors' areas film editing directing film pre-production directing directing acting theatre academy courses directing night interior lighting night exterior lighting character lighting color grading film art camera movement perspective cinematography cinematography methods 3 presentation recording film sound environment sound storytelling device film film sound recording pro sound editing sound design creative sound sound sound effects recording music recording  radio play music narrative device film film sound recording sound design sound design film materials scenography virtual space body international areas scenography scenography costume design arts space circle history finnish arts design history scenography narrative environments digital expression digi character design virtual materiality digital visual media arts visual media design interactivity playful design arts sound scenography projections scenography artistic international virtual set design focus design dramaturgy light space ennakkosuunnittelu ma-elokuvaan ma-elokuvan kuvaus mediated design scenography costume period costume style materials costume design costume design costume design areas costume design peer student productions costume sauna film television scenography costume design circle artistic praxis art dialogues art film art-practice-led artistic methodologies film scenography costume cinemas film television scenography costume design practical energy energy models support computer-aided arts-eng-project practical work 3d-printers passport degree work environment degree work environment abroad degree degree abroad degree practical pdpp thermodynamics heat transfer energy environment water environmental geology geomechanics geoinformation environmental conducting activities geology geotechnics structural design roads rock excavation finite element soil mechanics numerical geotechnics rock mechanics rock construction bituminous materials mixtures geoengineering geoengineering foundation ground improvement geoengineering economic geology mineral economics experience hard rock mining road maintenance rehabilitation geometric design roads positioning measurements maps spatial photogrammetry laser scanning remote sensing spatial analytics least-squares geoscience digital image feature extraction laser scanning photogrammetry remote sensing spatial analytics physical mathematical geoinformatics scientific geoinformatics photogrammetry remote sensing laser scanning navigation geoinformation cartography conducting activities conducting activities international design creativity business technologies industry swedish statics dynamics foundations mechanics foundations continuum mechanics fluid mechanics materials product design design mechatronics design machine elements mechatronics mechanical structural art design architecture talking art design architecture integrated integrated directed autonomous language path recognition prior english ahot finnish communication autonomous language path presenting arts online online presentation arts swedish swedish talking about art swedish foundations talking about art konsten att tala och skriva professionellt speak language finnish language finnish photographic art swedish administration swedish administration swedish business communication one teach one chinese english german spanish finnish swedish russian french report language communication entity debating informative presentations communication communication competence workplace communication integrated speech communication communication integrated speech communication intercultural communication multicultural leadership developing intercultural competence global workplace directed intercultural communication communicating expertise integrated speech communication speak expertise online preparatory english online preparatory english listening online engineers online engineers online presentations engineers autonomous language path communicating persuasive communication directed english integrated aaltonaut communication recognition prior english ahot finnish online persuasive presentations engineers communication msc engineers msc preparing defense industrial communications communication espanjan uusintatentti spanish hispanic cultures spanish spanish spanish spanish espaÃ±ol espaÃ±ol curso avanzado espaÃ±ol profesional business spanish business spanish espaÃ±ol cultura negocios espaÃ±ol cultura negocios espaÃ±ol comunicaciÃ³n corporativa portuguese portuguese french language culture french nutshell communication professionnelle avancÃ©e franÃ§ais french franÃ§ais franÃ§ais communication professionnelle franÃ§ais communication professionnelle franÃ§ais communication professionnelle recherche gestion produit projets francophones biz projets francophones grammaire franÃ§aise diplÃ´me franÃ§ais professionnel affaires diplÃ´me franÃ§ais professionnel affaires language swedish foundations swedish self-study swedish swedish international swedish international field-specific self-study swedish communication business society culture nordic countries yritysviestinnÃ¤n erityisteemat swedish workplace communication project-based business communication muntlig framstÃ¤llning skriftlig kommunikation arbetslivet muntlig kommunikation arbetslivet german german deutsch deutsch german grammar german grammar german outgoing exchange deutsch deutsch technisches deutsch landeskunde business german business german business german business german business german business german deutsch fÃ¼rs management language finnish language finnish survival finnish online survival finnish survival finnish finland finnish finnish professsional finnish language finnish architecture finnish incubator proficient integrated communications integrated communications finnish conversation finnish conversation finnish conversation finnish finnish finnish foretaste russian russian russian russian online russian specific business russian business russian business russian business russian business russian russian business communication russian business communication russkaja delovaja kommunikatsija dlja russkojazytshnyh russkaja delovaja kommunikatsija dlja russkojazytshnyh chinese culture chinese chinese chinese chinese chinese chinese characters chinese characters chinese characters chinese characters chinese characters chinese conversation chinese conversation surveying observing environment land use real estate economics valuation geometric models statistical stochastic landscape architecture landscape architecture landscape architecture landscape architecture landscape architecture landscape landscape architecture natural materials landscape architecture landscape architecture landscape land use landscape city management conservation landscape history landscape architecture contemporary landscape architecture environmental administration legislation landscape restoration management urban biotopes landscape architecture history landscape architecture finland plants cultural landscape old gardens parks gardens landscape architecture landscape architecture multidisciplinary green landscape architecture streets squares design environments landscape construction digital landscape architecture urbanism computational territories landscape historical landscapes landscape management landscape ecology architecture landscape computational methodologies landscape architecture urbanism computational discourse territories landscape environmental assessment history cultural landscape forestry management landscape construction critique landscape architecture landscape landscape architecture mechanical society machine design naval architecture mechanics dynamics rigid body fluid dynamics random dynamics structures finite element solids machine design selection materials quality management metrology mechanical ship hydrodynamics ship buoyancy stability passenger ships ship dynamics ship ship structures construction marine risks safety computational fluid ship design computational marine hydrodynamics product early product design team based design global innovation global innovation global innovation product winter navigation ice structures ice mechanics testing ice mechatronic machine design mechatronics fluid power fluid power fluid power dynamics vehicle mechatronics mechatronics metals alloys welding design materials safety non-destructive testing materials materials manufacturing manufacturing industrial casting manufacturing factory finite element continuum mechanics material beam plate shell models thin-walled structures fatigue structures fracture mechanics patents history innovation industrial technological history industrialization design vehicle operations management accounting marketing global business environment international marketing review stress management competing east asian firms corporate governance financial accounting global business business management digital media entrepreneurship global economy brand management international human resource management international organizational behavior international business strategy comparative consumer behavior intercultural management intercultural negotiations management information international business international business business marketing international business destination marketing business consulting global economy environmental economics gender communication international workplace global supply networks digital marketing strategies investments management accounting global business innovation management global economy capstone consumer culture leadership nonprofit management global game industry social media analytics finance corporate finance intermediate microeconomics intermediate macroeconomics business mathematics excel business communication business german business german german business communication german business communication business spanish business spanish spanish business communication spanish business communication business french business french french business communication french business communication finnish business communication finnish foreigners swedish business communication matrix algebra matrix algebra matrix algebra matrix algebra matrix algebra matrix algebra matrix algebra matrix algebra differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus differential integral calculus eng differential integral calculus differential integral calculus differential integral calculus differential integral calculus foundations discrete mathematics first probability statistics shapes action abstract algebra complex linear algebra partial differential equations fourier surfaces euclidean statistical inference numerical statistical inference optimization computational assignments mathematics stochastic prediction crystal flowers mirrors mathematics meets art architecture history graph combinatorics algebra number communications computing number galois computational algebraic geometry lie groups lie algebras measure integral real geometry hilbert banach differential geometry probability brownian motion stochastic large random random graphs network statistics stochastics statistics numerical matrix computations computational differential equations computational inverse problems mathematics cryptography continuum mechanics continuum mechanics computational mechanics computational mechanics mathematics mathematics mathematical software multivariate statistical investment statistical biological sciences risk linear optimization nonlinear optimization integer optimization identification mathematical solving nonlinear programming linear programming optimization optimization integer programming dynamic optimization game simulation operations graduate operations web-based role meaning design design design profession street space urban cultures design methodology competitions creative strategic colour material design clothing textile design clothing textile design textile dyeing design knitted fabrics knitwear design menswear design menswear woven fabrics design knitting design textile clothing materials design industrial design history fashion surface design printed fabrics woven fabrics material structure textile collection finishings functional clothing design childrenswear chemarts clothing textile design collection collection womenswear menswear design media design design design based product design design traditions exhibition artistic expression materials design industrial manufacturing technologies materials manufacturing technologies materials how design history interior architecture cad digital presentation projectproject design culture entrepreneurship business creation textile design innovative fashion design fashion collection design patternlab fashion collection fashion communication functional clothing materials wearable etextiles internship design foresight surface design sustainable fashion textile design patternlab marketing sales textiles interiors architecture fashion cultures woven fabrics jacquard knits knitwear printed fabrics knits knitwear printed fabrics fashion textiles woven fabrics shaping materials product architecture design designing services design strategy leadership dsl collaborative industrial design designing interactions module concept design user design knowing user design strategic co-design strategic co-design product design internship work experience user experience design design strategy entrepreneurship evaluating interactions function design design woodstudio space design exploration bio materiality product design ceramics glass colour sensorial design product product design social context curating storytelling design government knowledge-making sustainability eco-auditing sustainability politics sociotechnical transitions towards sustainability participatory facilitation design creative sustainable product service design designing urban governance services urban transitions systemic innovation design corporate entrepreneurship design design design winter design design managing design intersections between sustainability design design policy governance design design biophysics electromagnetic physiology brain biomedical imaging medical image medical imaging functional brain imaging signal biomedical bioelectromagnetism molecular biophysics cellular electrophysiology information neural circuits neurophysics dna nanotechnology structure operation human brain cognitive neuroscience human neuroscience medical device innovation biomedical ultrasonics electromagnetic biomedical human neuroscience human neuroscience biomedical molecular human neuroscience biomedical physics thermodynamics electromagnetism structure matter physics electromagnetism structure matter physics thermodynamics structure matter thermodynamics thermodynamics electromagnetism electromagnetism thermodynamics electromagnetism structure matter quantum mechanics thermodynamics statistical physics materials physics physics radiation physics radiation safety multi-disciplinary energy nuclear energy energy sources energy literacy energy physics computational physics quantum mechanics statistical mechanics quantum physics physics statistical physics dynamics particles fluids solids solid-state physics soft condensed matter physics surface physics nanophysics innovation entrepreneurial materials inno-project inno-project inno-mission internship camp functional materials innovation entrepreneurship optical physics optics laser physics physics reactor physics plasma physics fusion space fusion energy advances energy technologies microscopy nanomaterials microscopy nanomaterials physics theoretical physics physics computational physics density-functional low temperature physics nuclear plasma physics space fusion nuclear competence programming monte carlo particle transport simulations plasma physics computational emphasis energy technologies energy technologies solar energy fuel cells hydrogen wind power midterm review building information construction management building technologies computational urban economics real estate business environmental law real estate real estate economics real estate economics institutions real estate economics facility property management housing economics urban economics real estate market economic law environmental law business law real estate finance real estate valuation real estate business entrepreneurship land management economic law environmental law cadastral surveys valuation compensation real estate economics real estate economics seminars real estate economics economic law environmental law real estate real estate economics scientific built environments juridical frame urban urban built environment economics management surveying simulating modeling built environment geographic information built environment urban impact culture interior architecture interior architecture profession methodology interior architecture furniture design furniture design furniture design spatial design spatial design furniture design furniture design spatial design spatial design cad cad furniture material structure shape furniture structure product furniture function neglected space space identity space woodstudio design street furniture exhibition design lighting design service design interior architects physics mathematics international higher degree international lower degree industrial management information networks computer physics mathematics sciences land use transport transport policy economics sustainable living environment spatial transportation participatory transport traffic flow traffic management urban regional urban experience smart liveable city spatial transportation spatial transportation practical art education conceptions human arts education sociological cultural philosophical education didactics teaching art evaluation teaching orientative practical photography contemporary art education multiliteracy visual culture contemporary art art education images contemporary culture histories utopias finnish art history art education image contemporary art embodied relations world communities avant-garde social imagination institutions audience work art education sustainable sustainable design pedagogy materiality art ecology ethics digitalization phenomenon ceramics soft materials contemporary art elective artistic elective art everyday society elective art environment sustainable elective art interaction didactics art education practical didactics art education teacher's history philosophy education education art education discussion between arts teaching oppimisen hyvinvoinnin tuki opetussuunnitelma oppilaitoksen art art education interpreting images gender art education painting lens-based contemporary history image urban art pedagogy art well-being art media culture environmental culture art education international contemporary art education interdisciplinary art pedagogy digitalization blended art education agencies arts games gaming game design art education ecological art environment education power performativity solidarity hospitality visual culture worldviews art education sustainable art digitalization artistic art everyday society art environment sustainable artistic art everyday society art art environment sustainable art interdisciplinary art pedagogy activism civil engagement art artist society visual cultures curating contemporary art vicca immersion experiments spatiality multisensority context site situation mediums dimensions situated urban sites situations artistic authorship agency images tropes narratives film culture film contemporary art artistic words biofilia philosophy art post-contemporary artists vicca internship grounds philosophy art grounds culture literary modes rogue cultures extending artistic living non-living environment histories curating local agencies art publics mediating art exhibition environment curatorial on-site vicca currents visual cultures aesthetics digital communication designs gamification social art education methodologies methodologies nova nova nova visual culture contemporary art social context nova online community art education art art contemporary art artistic art-based art environment activism contemporary curating creative discourses intersecting art materiality art reseach art pedagogy assemblage industrial management industrial management leading oneself philosophy industrial management swedish industrial management groups organising creating value accounting finance decision-makers strategic management operations management strategy fieldwork management managing knowledge-intensive organizations r&d management industrial management networks communication organizations communication digital media strategic management strategies growth renewal case-seminar strategy strategy venturing strategic management innovation financial modeling strategy venturing contracting strategy venturing services service operations management operations management project-based management management external resources operations service management innovation operations services business operations management ventures healthcare operations management operations management social health care financial financial teams networks human potential designing adaptive creative organisations leadership management organisation design leadership creative solving safety management complex sociotechnical leadership management organisation design leadership high growth entrepreneurship startup finance opportunity prototyping entrepreneurial leadership startup leadership design innovation context entrepreneurial marketing startup marketing managing innovative sales managing innovative sales startup experience fellows fellows refresher business innovation management philosophy management networked business co-development interventions business networks business game industrial management organizational statistical industrial management statistical qualitative industrial management qualitative strategy venturing strategy venturing building design strategy venturing operations management leadership management economics elective economics strategy urban planning  research methods urban visual urban challenge studio urban challenge studio transnational politics urban social urban history complex adaptive green urban digital urban european metropolitan cultures urban immaterialsoft system urban modelling and simulation urban environmental assessment usp optional course education urban population dynamics urban urban club planned experienced city recent advances urban geography practical urban ecosystems ecology site island creating stories narratives miten idea materialisoituu design artist residence uwas currents uwas luova kirjoittaminen sarjakuva sound culture audio across disciplines spatial structures handmade creative design raw materials mixing multidisciplinary art art social impact creating multidisciplinary exhibitions uwas discussion freedom artistic art artificial intelligence innovative circular economy film work labour fashion culture human-material interaction human sensorium under pressure producing analyzing visual data photography city electric energy arts game design microscopic light images expanding visualization diving into fashion technologies design transhuman continuous prototype voices narrative art nature multisensorial art design club images creative coding consumer culture aesthetics uwas water environment computational water environmental groundwater hydrology environmental hydraulics hydrological surface water resources sustainable built environment sustainable global technologies sgt water governance water world urban water design management water wastewater networks physical chemical treatment water waste water wastewater treatment sustainability environmental environmental risk circular economy environmental biological treatment water waste water environmental world marketing canonical social management marketing philosophical underpinnings ongoing debates marketing consumer work career business sustainable entrepreneurship venture formation venture entrepreneurship innovation entrepreneurship innovation entrepreneurship society international business strategy business china business russia quantitative driving global businesses international strategy multinational corporation institutions partnerships responsible business sustainability international business management international business business design capstone global virtual game industry born global innovative digital business behavior models marketing scientific management operations econometrics finance investment management risk management capstone valuation financial markets institutions behavioral finance investment marketing financial services venture capital finance corporate finance capstone mergers finance international financial management management econometrics finance corporate financial management econometrics mergers private equity investment quantitative finance econometrics mathematics business mathematics continuation statistics negotiation analytics optimization methodologies productivity simulation quantitative empirical business data business data business paper quantitative microeconomics pricing strategy finnish economy economic policy international economics finance history economic economics personnel economics money banking economic policy mathematics economists empirical economists energy environmental economics russian economy opportunities challenges business urban economics economics capstone econometrics data international trade economy macroeconomics labor economics labor economics microeconometrics microeconometrics behavioral economics macroeconomics labor markets resource environmental economics banking finance policy bayesian econometrics money monetary policy globalization growth investment emerging markets economics helsinki supplementary economics economics microeconomics pricing microeconomics policy industrial organization micro economics economics african economic macroeconometrics banking macroeconomics macroeconomics growth macroeconomics fluctuations macroeconomics policy econometrics econometrics data models history economic growth economics innovation capstone economics capstone microeconomic policy microeconomics microeconomics microeconomics microeconomics macroeconomics macroeconomics macroeconomics macroeconomics contract law employment law capstone-course business law legal aspects finance law law finance international contracts aspects entrepreneurship including european international tax law tax challenges multinational enterprises law economy intellectual property law taxes corporate finance distribution logistics services supply management management management global logistics distribution networks service operations strategy product management sales operations coordination supply quality leadership quality management operations quantitative models scmom warehousing technologies logistics analytics intellectual property strategic sustainable supply service business models management information information capstone information programming programming information economy strategic information management business business intelligence information essential information management consulting data resources management information information global strategy capstone global strategy global management block business communication business capstone business responsible global leadership seminars leadership self-development global management scientific business ethics capstone enterprise capstone business intelligence capstone digitalism student intercultural business workplace communication media communication communication strategic stakeholder relations global online team management communication strategy work managing corporate communication corporate communication corporate communication investor relations management media management organizational communication leadership corporate communication global organizational communication business negotiations crossroads proficiency finnish administration finnish administration strategy communication organizational communication organizational communication intercultural communication management communication corporate communication philosophy social qualitative essential producing giving presentations";


	var textA = text.split(" ");;

	var textchoice = $('#selecttext select').prop("value");

	if (textA.length > min_text_length || textchoice!="own") {
		$("#loading").addClass("active");

		if (textchoice=='own') setTimeout(function(){
			sourcetext = text;
			analyse();
		}, 10);
		else jQuery.get(baseurl+"texts/"+textchoice+".txt", function(data){
			sourcetext = data;
			analyse();
		});
	}
})

function events() {

	// general events

	$(document).unbind().keyup(function(e) {

		// return
	  if (e.keyCode == 13) {
			if ($("#options").hasClass("active")) {
				apply();
			}
			$("#exclude").blur();
		}
		// escape
	  else if (e.keyCode == 27) {

			if ($("#options").hasClass("active")) options();
			if ($("#help").hasClass("active")) help();

			if ($("#search").is(":focus")) {
				suggest();
				$("#search").blur();
			}
			else if (active.length>0) {
				$(".active").addClass("hover");
				active = [];
				layout();
			}
		}
	});

	$("#selectall").unbind().click(function(){

		var types = ["JJ", "RR", "CC", "DD", "NN", "MC", "II", "PP", "PU", "SY", "FU", "VV"];
		for (var i=0; i < types.length; i+=1) {
			$("#type_"+types[i]).prop("checked", true);
		}

	})

	$("#search").unbind().keyup(function(e){

		$("#suggestions div.active").removeClass("active");

		// return
		if (e.keyCode==13) {
			var index = parseInt($($("#suggestions div")[suggestionindex]).prop("id").split("s_")[1]);
			$("#search").blur();
			active = [index];
			layout();
		}
		else if (e.keyCode==38 || e.keyCode==40) {

			var suglength = $("#suggestions div").length;

			if (e.keyCode==38) suggestionindex--;
			else if (e.keyCode==40) suggestionindex++;

			if (suggestionindex < 0) suggestionindex = suglength-1;
			else if (suggestionindex > suglength-1) suggestionindex = 0;

			$($("#suggestions div")[suggestionindex]).addClass("active");

			// highlight selection
			var index = parseInt($($("#suggestions div")[suggestionindex]).prop("id").split("s_")[1]);
			hover();
			hover(index);
		}
		else suggest($("#search").val());
	});

	$("#exclude").unbind().keyup(function(){

		var txt = $(this).val();

		if (txt.length>0) $("#excludeopt").prop("checked", true);

	});

	$("#apply").unbind().click(apply);

	$("#header h1").unbind().click(home);

	$("#options_button").unbind().click(function(e){options();});

	$("#help_button").unbind().click(function(e){help();});

}

function options(show) {

	if (typeof show === "undefined") {
		if ($("#options").hasClass('active')) show = false;
		else show = true;
	}

	// show
	if (show) {
		help(false);
		suggest();
		$("#exclude").focus();
		$("#options_button").addClass('active');
		$("#options").addClass('active');
	}
	// hide
	else {
		$("#options_button").removeClass('active');
		$("#options").removeClass('active');
	}

}

function help(show) {

	if (typeof show === "undefined") {
		if ($("#help").hasClass('active')) show = false;
		else show = true;
	}



	// show
	if (show) {
		options(false);

		$("#help_button").addClass('active');
		$("#help").addClass('active');
	}
	// hide
	else {
		$("#help_button").removeClass('active');
		$("#help").removeClass('active');
	}

}



function apply() {

	options(false);

	exclude();
}

// back to home screen
function home() {
	beyondhome = false;

	window.scrollTo(0,0);
	$("#instances").removeClass("active");

	help(false);
	options(false);

	Words = {};
	words = [];
	selection = [];
	active = [];

	$("#instances").html("");

	$("#loading").removeClass("active");

	$("#intro").css({display: 'block'});

	setTimeout(function(){
		$("#intro").css({opacity: 1});
	}, 10);

	setTimeout(function(){
		$("#vis2,#vis").html("");
	}, 1000);


}

// get words that match the query
function suggest(query) {

	suggestions = [];
	suggestionindex = 0;

	if (typeof query === "undefined" || query.length==0) {
		$("#search").val("");
		$("#suggestions").html("").css({opacity: 0, height: 0});
		return;
	}

	options(false);
	help(false);

	for (var i=0; i < words.length; i+=1) {
		var Word = words[i];
		if (lowercase) var w = Word.word;
		else var w = Word.word.toLowerCase();

		if (w.indexOf(query.toLowerCase())==0 && Word.exclude==false) suggestions.push(words[i]);
	}

	sortByAlphabet(suggestions);

	var list = "";

	for (var i=0; i < suggestions.length; i+=1) {
		var Word = suggestions[i];
		var index = Word.index;
		var word = Word.word;

		if (i>20) break;

		if (i==suggestionindex) {
			var sugsel = " class='active' ";
			hover(index);
		}
		else var sugsel = "";

		list+= "<div "+sugsel+" id='s_"+index+"'>"+word+"</div>";
	}

	list += "";

	// height
	var h = Math.min(suggestions.length, 20) * 24;

	if (suggestions.length==0) $("#suggestions").html("").css({opacity: 0, height: 0});
	else $("#suggestions").html(list).css({opacity: 1, height: h});


	// events
	$("#suggestions div").click(function(){
		var index = parseInt($(this).prop("id").split("s_")[1]);
		active = [index];
		layout();
	})

	$("#suggestions div").hover(function(){
		var index = parseInt($(this).attr("id").split("s_")[1]);
		hover(index);
	}, function(){
		hover();
	});
}

// analyse text, build structure, get widths
function analyse(text) {

	lowercase = $("#lowercase").prop('checked');
	$("#intro").css({opacity: 0});
	setTimeout(function(){
		$("#intro").css({display: 'none'});
	}, 1000);

	// lowercase = $("#tolowercase").prop("checked");
	Words = {};
	delete Words['watch'];
	words = [];
	maxcount = 0;

	var type_map = {
		'CC'	: 'CC',
		'CD'	: 'MC',
		'DT'	: 'MC',
		'EX'	: 'RR',
		'FW'	: 'FU',
		'IN'	: 'II',
		'JJ'	: 'JJ',
		'JJR'	: 'JJ',
		'JJS'	: 'JJ',
		'LS'	: 'MC',
		'MD'	: 'VV',
		'NN'	: 'NN',
		'NNP'	: 'NN',
		'NNPS': 'NN',
		'NNS'	: 'NN',
		'POS'	: 'PU',
		'PDT'	: 'DD',
		'PP$'	: 'PP',
		'PRP'	: 'PP',
		'RB'	: 'RR',
		'RBR'	: 'RR',
		'RBS'	: 'RR',
		'RP'	: 'RR',
		'SYM'	: 'SY',
		'TO'	: 'II',
		'UH'	: 'FU',
		'VB'	: 'VV',
		'VBD'	: 'VV',
		'VBG'	: 'VV',
		'VBN'	: 'VV',
		'VBP'	: 'VV',
		'VBZ'	: 'VV',
		'WDT'	: 'DD',
		'WP'	: 'PP',
		'WP$'	: 'DD',
		'WRB'	: 'RR',
		','		: 'PU',
		'.'		: 'PU',
		':'		: 'PU',
		'!'		: 'PU',
		'$'		: 'SY',
		'#'		: 'SY',
		'"'		: 'PU',
		'('		: 'PU',
		')' 	: 'PU'
	}

	// POS tagging
	var text = "";
	// text=sourcetext.replace(/"/g, " \" ");
	text=sourcetext.replace(/;/g, " ; ");
	text=text.replace(/:/g, " : ");
	text=text.replace(/'s/g, " 's ");
	text=text.replace(/`s/g, " 's ");
	text=text.replace(/â€™s/g, " 's ");
	text=text.replace(/\[/g, " [ ");
	text=text.replace(/\]/g, " ] ");
	text=text.replace(/\(/g, " ( ");
	text=text.replace(/\)/g, " ) ");

	var taggedWords = new POSTagger().tag(new Lexer().lex(text));

	indices = {};

	// words
	var index = 0;
	for (var i=0; i < taggedWords.length; i+=1) {
		if (lowercase) taggedWords[i][0] = taggedWords[i][0].toLowerCase();
	  var word = taggedWords[i][0];

		if (word=="'s") taggedWords[i][1] = "POS";
		var type = type_map[taggedWords[i][1]];

		if (!indices.hasOwnProperty(word)) {
			indices[word] = index;
			wordmap[index] = word;
			index++;
		}

		if (!Words.hasOwnProperty(word)) {
			var Word = {
				word: word,
				count: 0,
				shown: false,
				exclude: false,
				index: indices[word],
				links: {},
				types: {},
				instances : []
			};

			Words[word] = Word;
			words.push(Word);
		}
		else var Word = Words[word];

		if (!Word.types.hasOwnProperty(type)) Word.types[type] = 0;
		Word.types[type]++;
		Word.count++;
	}

	for (var i=0; i < words.length; i+=1) {
		var types = 0;
		for (type in words[i].types) types++;
	}

	// links and instances
	for (var i=0; i < taggedWords.length; i+=1) {
		var word = taggedWords[i][0];
		var Word = Words[word];
		maxcount = Math.max(maxcount, Word.count);

		var instance = [];

		for (var j=i-windowside; j < i+windowside+1; j+=1) {

			if (i==j) instance.push(null);
			else if (j>-1 && i!=j && j<taggedWords.length) {

				var word2 = taggedWords[j][0];
				var Word2 = Words[word2];

				instance.push(word2);

				if (!Word.links.hasOwnProperty(word2)) {
					Word.links[word2] = {
						positions: [],
						strength: 0
					}
				}

				var position = j-i;
				var strength = windowside - Math.abs(position) + 1;
				Word.links[word2].positions.push(position);
				Word.links[word2].strength += strength;
			}
		}

		Word.instances.push(instance);

		for (colocate in Word.links) {
			// Word.maxstrength = Math.max(Word.links[colocate].strength, Word.maxstrength);
			var sum = Word.links[colocate].positions.reduce(function(a, b) { return a + b; });
			var avg = sum / Word.links[colocate].positions.length;
			Word.links[colocate].avgpos = Math.round(1000*avg)/1000;
		}

	}

	// get widths
	for (var i=0; i < words.length; i+=1) {
		var Word = words[i];
		var word = Word.word;
		var index = Word.index;

		$("#vis2").append(" <span id='w2_"+index+"'>&nbsp;"+word+"&nbsp;</span> ");

		Word.width = $("#w2_"+index).width();
	}

	// sort by count
	words = words.sort(function(a,b){ if (a.count>b.count) return -1; else return 1; });

	exclude();
}

// exclude words based on stopwords, hiding, and types
function exclude() {

	for (var i=0; i < words.length; i+=1) {
		words[i].shown = false;
		words[i].exclude = false;
	}

	// mysql stopwords
	if ($("#stopwords").prop("checked")) var hide_stopwords = true;
	else var hide_stopwords = false;

	var stopwords = {"a": 1, "able": 1, "about": 1, "across": 1, "after": 1, "all": 1, "almost": 1, "also": 1, "am": 1, "among": 1, "an": 1, "and": 1, "any": 1, "are": 1, "as": 1, "at": 1, "be": 1, "because": 1, "been": 1, "but": 1, "by": 1, "can": 1, "cannot": 1, "could": 1, "dear": 1, "did": 1, "do": 1, "does": 1, "either": 1, "else": 1, "ever": 1, "every": 1, "for": 1, "from": 1, "get": 1, "got": 1, "had": 1, "has": 1, "have": 1, "he": 1, "her": 1, "hers": 1, "him": 1, "his": 1, "how": 1, "however": 1, "i": 1, "if": 1, "in": 1, "into": 1, "is": 1, "it": 1, "its": 1, "just": 1, "least": 1, "let": 1, "like": 1, "likely": 1, "may": 1, "might": 1, "most": 1, "must": 1, "my": 1, "neither": 1, "no": 1, "nor": 1, "not": 1, "of": 1, "off": 1, "often": 1, "on": 1, "only": 1, "or": 1, "other": 1, "our": 1, "own": 1, "rather": 1, "said": 1, "say": 1, "says": 1, "she": 1, "should": 1, "since": 1, "so": 1, "some": 1, "than": 1, "that": 1, "the": 1, "their": 1, "them": 1, "then": 1, "there": 1, "these": 1, "they": 1, "this": 1, "tis": 1, "to": 1, "too": 1, "twas": 1, "us": 1, "wants": 1, "was": 1, "we": 1, "were": 1, "what": 1, "when": 1, "where": 1, "which": 1, "while": 1, "who": 1, "whom": 1, "why": 1, "will": 1, "with": 1, "would": 1, "yet": 1, "you": 1, "your": 1, "me": 1};

	// hide these words
	if ($("#excludeopt").prop("checked")) var exclude = $("#exclude").val().split(" ");
	else var exclude = [];

	// active types
	var types = ["JJ", "RR", "CC", "DD", "NN", "MC", "II", "PP", "PU", "SY", "FU", "VV"];
	var active_types = {};
	for (var i=0; i < types.length; i+=1) {
		var type = types[i];
		if ($("#type_"+type).prop("checked")) active_types[type] = true;
		else active_types[type] = false;
	}

	for (var i=0; i < words.length; i+=1) {
		var Word = words[i];
		// stopwords
		if (hide_stopwords && stopwords.hasOwnProperty(Word.word.toLowerCase())) Word.exclude = true;
		// exclude
		else if (exclude.indexOf(Word.word)>-1) Word.exclude = true;
		// types
		else {
			var type_not_included = true;
			for (type in Word.types) {
				if (active_types[type]) type_not_included = false;
			}

			if (type_not_included) Word.exclude = true;
		}
	}

	layout();
}

// select, position, and size and words
function layout() {

	beyondhome = true;
	events();

	suggest();
	options(false);
	help(false);

	$("#instances").addClass("active");

	if (active.length==0) cloud();
	else if (active.length==1) context();
	else if (active.length==2) comparison();
}

// word cloud
function cloud() {

	$("span.active").removeClass("active");

	selection = [];
	var maxcount = 0;
	var mincount = 100000;

	// select top 300 words
	for (var i=0; i < words.length; i+=1) {
		var Word = words[i];
		if (Word.exclude) Word.shown = false;
		else if (selection.length==limit) Word.shown = false;
		else {
			Word.shown = true;
			maxcount = Math.max(maxcount, Word.count);
			mincount = Math.min(mincount, Word.count);
			selection.push(Word);
		}
	}

	sortByAlphabet(selection);

	// scale words based on count, count lines
	var widthsum = 0;
	var lines = 0;
	var extras = [];
	for (var i=0; i < selection.length; i+=1) {
		var Word = selection[i];
		Word._s = interval(Word.count, mincount, maxcount, 1/3, 1, true);
		Word._w = Word.width * Word._s;

		if (widthsum + Word._w + worddist > 975) {
			extras[lines] = 1000 - widthsum;
			widthsum = 0;
			lines++;
		}
		widthsum += Word._w + worddist;
	}
	extras[lines] = 1000 - widthsum;

	// create a layout from a to z
	var lineheight = 480/(lines+1);
	var line = 0;
	var x = 0;
	var y = 0;

	for (var i=0; i < selection.length; i+=1) {
		var Word = selection[i];

		if (x + Word._w + worddist > 975) {
			line++;
			x = 0;
			y += lineheight;
		}
		Word._x = x + extras[line]/2;
		Word._y = y;

		x += Word._w + worddist;
	}

	display();
}

// word context
function context() {

	var index_ = active[0];
	var Word_ = Words[wordmap[index_]];

	// create a new selection
	var linked = [];
	for (word in Word_.links) {
		var Word2 = Words[word];
		if (typeof Word2 === "undefined" || Word2.index==index_ || Word2.exclude) continue;
		Word2.strength = Word_.links[word].strength;
		linked.push(Word2);
	}

	linked = linked.sort(function(a,b){ if (a.strength>b.strength) return -1; else return 1; });
	selection = [];

	if (linked.length<=limit_context) selection = linked;
	else {
		var cutoff = linked[limit_context].strength;
		for (var i=0; i < linked.length; i+=1) {
			var Word2 = linked[i];
			if (Word2.strength<cutoff) break;
			selection.push(Word2);
		}
	}

	selection.push(Word_);

	// update shown to reflect new selection
	for (var i=0; i < words.length; i+=1) words[i].shown = false
	for (var i=0; i < selection.length; i+=1) selection[i].shown = true;

	// gather context positions
	var maxstr = 0;
	var minpos = 100;
	var maxpos = -100;
	for (var i=0; i < selection.length; i+=1) {
		var word = selection[i].word;
		if (selection[i].index==index_) continue;
		minpos = Math.min(minpos, Word_.links[word].avgpos);
		maxpos = Math.max(maxpos, Word_.links[word].avgpos);
		maxstr = Math.max(maxstr, Word_.links[word].strength);
	}

	sortByAlphabet(selection);

	// set position and scale
	for (var i=0; i < selection.length; i+=1) {
		var Word = selection[i];
		var word = Word.word;
		var index = Word.index;

		if (index==index_) {
			var x = 500 - Word.width/2;
			var y = 250;
			var s = 1;
		}
		else {
			var s = interval(Word.strength, 1, maxstr, 1/3, 1, true);
			var x = interval(Word_.links[word].avgpos, minpos, maxpos, 100, 900, true) - Word.width*s/2;
			var y = 25+i/selection.length * 425;
		}

		Word._x = x;
		Word._y = y;
		Word._s = s;
	}

	display();
}

// word comparison
function comparison() {

	var Word1 = Words[wordmap[active[0]]];
	var Word2 = Words[wordmap[active[1]]];

	var linked1 = [];
	var linked2 = [];

	var maxstrength1 = 0;
	var maxstrength2 = 0;

	// reset shown and positions
	for (var i=0; i < words.length; i+=1) {
		words[i].shown = false
		delete words[i].strength1;
		delete words[i].strength2;
	}

	// select words to be shown
	for (w in Word1.links) {
		var Word = Words[w];
		if (Word.exclude) continue;
		Word.strength1 = Word1.links[w].strength;
		maxstrength1 = Math.max(Word.strength1, maxstrength1);
		if (Word2.links.hasOwnProperty(w)) linked1.push(Word);
	}
	for (w in Word2.links) {
		var Word = Words[w];
		if (Word.exclude) continue;
		Word.strength2 = Word2.links[w].strength;
		maxstrength2 = Math.max(Word.strength2, maxstrength2);
		if (Word1.links.hasOwnProperty(w)) linked2.push(Word);
	}

	linked1 = linked1.sort(function(a,b){ if (a.strength1>b.strength1) return -1; else return 1; });
	linked2 = linked2.sort(function(a,b){ if (a.strength2>b.strength2) return -1; else return 1; });

	if (linked1.length<=limit_compare) var cutoff1 = linked1[linked1.length-1].strength1;
	else var cutoff1 = linked1[limit_compare].strength1;

	if (linked2.length<=limit_compare) var cutoff2 = linked2[linked2.length-1].strength2;
	else var cutoff2 = linked2[limit_compare].strength2;

	var linked = linked1.concat(linked2);
	selection = [];
	for (var i=0; i < linked.length; i+=1) {
		var Word = linked[i];
		if (!Word.hasOwnProperty("strength1")) Word.strength1 = 0;
		if (!Word.hasOwnProperty("strength2")) Word.strength2 = 0;
		if (Word.strength1>=cutoff1 || Word.strength2>=cutoff2) selection.push(Word);
	}

	selection.push(Word1);
	selection.push(Word2);

	// update shown to reflect new selection
	for (var i=0; i < selection.length; i+=1) selection[i].shown = true;

	sortByAlphabet(selection);

	// set position and scale
	for (var i=0; i < selection.length; i+=1) {
		var Word = selection[i];
		var word = Word.word;
		var index = Word.index;

		if (index==Word1.index) {
			var x = 30;
			var y = 250+Word.width/2-30;
			var s = 1;
		}
		else if (index==Word2.index) {
			var x = 970-2;
			var y = 250-Word.width/2-30;
			var s = 1;
		}
		else {
			var s1 = interval(Word.strength1, 1, maxstrength1, 1/3, 1, true);
			var s2 = interval(Word.strength2, 1, maxstrength2, 1/3, 1, true);
			var s = (s1+s2)/2

			var allstrength = Word.strength1 + Word.strength2;
			var x = 5 + Word1.width/2 + (990-Word1.width/2-Word2.width/2)*Word.strength2/allstrength - Word.width*s/2;
			var y = 25+i/selection.length * 425;
		}

		Word._x = x;
		Word._y = y;
		Word._s = s;
	}

	display();

}

// add, remove, update elements
function display() {

	instances();

	$(".linked").removeClass("linked");
	hoverTimeout = setTimeout(function(){ hover(); }, 2000);

	var spans = $("#vis span");

	var shown = {}; // by index

	for (var i=0; i < spans.length; i+=1) {
		var el = $(spans[i]);
		var index = parseInt(el.prop("id").split("w_")[1]);
		var Word = Words[wordmap[index]];

		// update
		if (Word.shown == true) {
			shown[index] = Word;
		}
		// remove
		else {
			el.addClass("toberemoved");
		}
	}

	// add
	for (var i=0; i < words.length; i+=1) {
		var Word = words[i];
		var word = Word.word;
		var index = Word.index;

		if (!shown.hasOwnProperty(index) && Word.shown) {
			$("#vis").append(" <span class='justadded' id='w_"+index+"'>&nbsp;"+word+"&nbsp;</span> ");
			shown[index] = Word;
		}
	}

	// set properties for shown items
	for (index in shown) {

		var Word = shown[index];
		var el = $("#w_"+index);

		var x = Word._x;
		var y = Word._y;
		var s = Word._s;

		if (active.indexOf(parseInt(index))>-1) {
			el.addClass("active");
		}
		else el.removeClass("active");

		// highlight active
		var rot = "";
		if (active.length==2)	{
			if (active[0] == index) rot = " rotate(-90deg) ";
			else if (active[1] == index) rot = " rotate(90deg) ";
		}

		// update css
		var css = {transform: "translate("+x+"px,"+y+"px) scale("+s+")"+rot};
		el.css(css);
	}

	// events
	$("#vis span").unbind();


	// drag a line
	$("#vis span").mousedown(function(e){
		e.originalEvent.preventDefault();

		var pos = $('#can').position();
		var x = e.pageX-pos.left;
		var y = e.pageY-pos.top;
		var id = $(this).attr("id");
		var index = parseInt(id.split("w_")[1]);
		var Word = Words[wordmap[index]];

		hover();
		$(this).addClass("hover");
		$("#vis span").unbind();

		$("#vis span").hover(function(){
			var id2 = $(this).attr("id");
			var index2 = parseInt(id2.split("w_")[1]);
			var Word2 = Words[wordmap[index2]];

			if (Word.links.hasOwnProperty(Word2.word)) {
				$(this).addClass('hover');
			}

		}, function(){
			if (id!=$(this).attr("id")) $(this).removeClass('hover');
		});

		// update line
		$(document).mousemove(function(e2){
			var x2 = e2.pageX-pos.left;
			var y2 = e2.pageY-pos.top;

			can.clearRect(0,0,1000,500);
			can.beginPath();
			can.moveTo(x, y);
		  can.lineTo(x2, y2);
			can.strokeStyle = "#000";
			can.lineWidth = 2;
			can.stroke();
		});

		// release over another element
		$("#vis span").mouseup(function(e){

			var index2 = parseInt($(this).attr("id").split("w_")[1]);
			var Word2 = Words[wordmap[index2]];

			if (index==index2) {
				if (active.length==1 && active[0] == index) active = [];
				else active = [index];
				layout();
			}
			else if (!Word.links.hasOwnProperty(Word2.word)) {
				$(document).unbind();
				$("#vis span").unbind();
				layout();
			}
			else {
				active = [index, index2];
				$(document).unbind();
				$("#vis span").unbind();
				layout();
			}

			can.clearRect(0,0,1000,500);

		});

		$(document).mouseup(function(){
			$(document).unbind();
			can.clearRect(0,0,1000,500);
			display();
			hover();
		});

	})



	$("#vis span").hover(function(){
		var index = parseInt($(this).attr("id").split("w_")[1]);
		hover(index);
	}, function(){
		hover();
	});


	// handle toberemoved and justadded
	setTimeout(function(){ $(".toberemoved").remove(); }, 500);
	setTimeout(function(){ $(".justadded").removeClass("justadded"); }, 500);

}

function hover(index) {

	clearTimeout(hoverTimeout);
	if (active.length==1 && active[0] == index) return;

	// reset old hovers
	$(".hover").removeClass("hover");
	$(".notlinked").removeClass("notlinked");
	$(".linked").removeClass("linked");

	for (var i=0; i < words.length; i+=1) {
		var Word = words[i];
		if (Word.shown) $("#w_"+Word.index).css({"background-color": 'transparent'});
	}

	// undo hover
	if (typeof index === "undefined") return;

	// apply hover
	var Word = Words[ wordmap[index] ];

	if (typeof Word === "undefined") return;

	// if word is not shown
	if (Word.shown==false && Word.exclude==true) return;


	$(".w_"+Word.index).addClass('hover');
	$("#w_"+Word.index).addClass('hover');

	var maxstrength = 0;
	for (var i=0; i < selection.length; i+=1) {
		var Word2 = selection[i];
		if (Word.links.hasOwnProperty(Word2.word)) {
			maxstrength = Math.max(maxstrength, Word.links[Word2.word].strength);
		}
	}

	for (var i=0; i < selection.length; i+=1) {
		var Word2 = selection[i];
		if (Word2.index==Word.index) continue;

		if (!Word.links.hasOwnProperty(Word2.word)) {
			$("#w_"+Word2.index).addClass("notlinked");
		}
		else {
			var opac = interval(Word.links[Word2.word].strength, 1, maxstrength, .1, .75, true);
			var color = "rgba(175, 35, 100, "+opac+")";  //#F6812E
			$("#w_"+Word2.index).addClass("linked").css({"background-color": color});
		}
	}

}


// sort selection by alphabet
function sortByAlphabet(tobesorted) {
	if (lowercase) tobesorted = tobesorted.sort(function(a,b){
		if (a.word<b.word) return -1; else return 1;
	});
	else tobesorted = tobesorted.sort(function(a,b){
		if (a.word.toLowerCase()<b.word.toLowerCase()) return -1; else return 1;
	});

}

// display sentences containing active word
function instances(showall) {

	if (typeof showall === "undefined") showall = false;

	var firstinstances = [];


	var instancesInsert = "";

	// no selection
	if (active.length==0) {

		instancesInsert += "<div>Select a word to see its context or drag a line between two words to compare them.</div>";

	}
	// single word selection
	else if (active.length==1) {

		var Word = Words[wordmap[active[0]]];

		var thereismore = false;
		var my_data = data;
		var my_word = "test";
	//	var indeksit = course_selection(Word);
		var indeksit = [];
	  for (var s=0; s < data.length; s+=1) {
	  //  var course_name = data[i]["courseName"];
			var rest = my_data[s]["description"].toLowerCase();
			var title = my_data[s]["courseName"].toLowerCase();
	    var a = rest.indexOf(Word.word);
			var b = title.indexOf(Word.word);
			if (a != -1){
				// if (!indeksit.contains(a)) {
						indeksit.push(s);
				// }
			}
			else if (b != -1) {
				indeksit.push(s);
			}
	   }


	//	for (var i=0; i < 5; i+=1) {
		for (i in indeksit) {
		// for (var i=0; i < Word.instances.length; i+=1) {
			if (showall==false && i==snippetlimit) {
				thereismore = true;
				break;
			}

			var w1  = Math.floor(Words[ wordmap[active[0]] ].width/2);
			var w0  = Math.floor(1000-w1)/2;

		//	var insert = "<div class='left' style='width:"+w0+"px;'><span class='ellipsis'>â€¦</span>";
			var insert = "<div class='left' style='width:"+w0+"px;'><span class='ellipsis'>â€¦</span>";

			// for (var j=0; j < Word.instances[i].length; j+=1) {
				// active word in the middle
				// if (Word.instances[i][j]==null) {

					// insert += "</div><div class='middle' style='width:"+w1+"px;'><span class='w_"+Word.index+"'>" + Word.word + "</span></div>";

					// insert += "</div><div class='left' style='width:"+w1+"px;'><span class='w_'>" + Word.word + "</span></div>";
					// insert += "</div><div class='left' style='width:"+w1+"px;'><span class='w_'>" + indeksit[i] + "</span></div>";
					insert += "</div><div class='left' style='width:"+w1+"px;'><b><span class='w_'>" + my_data[indeksit[i]]["courseName"] + "</span></b></div>";

					insert += "</div><div class='left' style='width:"+w1+"px;'><span class='w_'>"+  my_data[indeksit[i]]["description"] +"</span></div>";
//my_data[i]["courseName"]

					// insert += "<div class='right' style='width:"+w0+"px;'>";

				// }
				// else {
				// 	var Word2 = Words[Word.instances[i][j]];
				// 	insert += "<span class='w_"+Word2.index+"'>" + Word2.word + "</span>";
				// }
			// }

			insert += "<span class='ellipsis'> </span></div>"

			instancesInsert += insert;
		}

		// load more
		// if (thereismore) instancesInsert += "<div id='showall'><span>Show all "+Word.instances.length+" instances of this word</span></div>";
		if (thereismore) instancesInsert += "<div id='showall'><span>Show all "+indeksit.length+" instances of this word</span></div>";
	}
	// comparison
	else if (active.length==2) {

		var Word1 = Words[wordmap[active[0]]];
		var Word2 = Words[wordmap[active[1]]];

	}


	if (showall==false) {
		$("#instances").css({opacity: 0});
		var delay = 1000;
	}
	else var delay = 10;

	setTimeout((function (instancesInsert) { return function(bar) {
		$("#instances").html(instancesInsert);

		$("#instances").css({opacity: 1});

		// hover
		$("#instances div:not(#showall) span").hover(
			function(){
				var index = parseInt($(this).attr("class").split("w_")[1]);
				hover(index);
			},
			function(){ hover(); }
		);

		// show more
		$("#showall").click(function(){
			instances(true)	;
		});

		$("#instances div:not(#showall) span").click( function(){
			var index = parseInt($(this).attr("class").split("w_")[1]);
			var Word = Words[wordmap[index]];

			if (Word.exclude==false&&active[0]!=index) {
				$(this).addClass('active');

				active = [index]
				layout();
			}
		});

	}; })(instancesInsert), delay);

}


function interval(x, xmin, xmax, ymin, ymax, bound, log) {
	// make sure return value is withiin ymin and ymax
	if (typeof bound === "undefined") bound = false;
	if (typeof log === "undefined") log = false;

	// if (xmin==xmax) return (ymin+ymax)/2
	if (xmin == xmax) return ymax;

	var y, m, n;

	if (log) {
		var logxmax = Math.log(xmax+1);
		var logxmin = Math.log(xmin+1);
		m           = ( ymax / logxmax - ymin) / (1 - logxmin );
		n           = ymin - m*logxmin;
		y           = m * Math.log(x+1) + n;
	}
	else {
		m           = (ymax - ymin) / (xmax - xmin);
		n           = -xmin * m + ymin;
		y           = x * m + n;
	}

	if (bound) {
		if (ymin<ymax) {
			y          = Math.min(ymax, y);
			y          = Math.max(ymin, y);
		}
		else {
			y          = Math.max(ymax, y);
			y          = Math.min(ymin, y);
		}
	}

	return y;
}



</script>
</body>
</html>
